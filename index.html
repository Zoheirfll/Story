<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Pour Toi ‚ù§Ô∏è</title>

    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚ù§Ô∏è</text></svg>"
    />

    <link
      href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Montserrat:wght@400;600;800&family=Courier+Prime&family=Orbitron:wght@500&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
      :root {
  --primary: #d6336c; /* Un rose plus √©l√©gant */
  --secondary: #70a1ff;
  --glass: rgba(255, 255, 255, 0.9);
  --text: #000000; /* FORCE LE TEXTE EN NOIR PUR */
}

      * {
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
      }
      body {
  margin: 0;
  font-family: "Montserrat", sans-serif;
  /* Un d√©grad√© "Sunset" beaucoup plus romantique et chaleureux */
  background: linear-gradient(120deg, #fccb90 0%, #d57eeb 100%);
  color: var(--text);
  overflow-x: hidden;
  min-height: 100vh;
  padding-bottom: 50px;
}

      /* --- VALENTINE INTRO SCREEN --- */
      #intro-screen {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  /* Fond d√©grad√© radial doux (Rose p√™che vers Rose p√¢le) */
  background: radial-gradient(circle at center, #ff9a9e 0%, #fad0c4 100%);
  z-index: 10000;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  padding: 20px;
}
      .intro-title {
  font-family: "Dancing Script", cursive;
  font-size: 3.5rem;
  color: white; /* Titre en blanc */
  margin-bottom: 30px;
  text-shadow: 0 4px 10px rgba(0,0,0,0.2); /* Ombre douce pour lisibilit√© */
}

      .intro-gif {
  max-width: 200px;
  border-radius: 20px;
  margin-bottom: 40px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
  border: 4px solid white; /* Petit cadre blanc autour du GIF */
}

      .btn-group {
  display: flex;
  gap: 30px;
  justify-content: center;
  align-items: center;
  width: 100%;
  height: 80px; 
}

/* Bouton YES : Blanc avec texte Rose */
.btn-yes {
  background: white;
  color: #ff4757;
  padding: 15px 45px;
  font-size: 1.5rem;
  border: none;
  border-radius: 50px;
  font-family: 'Montserrat', sans-serif;
  font-weight: 800; /* Texte gras */
  cursor: pointer;
  box-shadow: 0 10px 20px rgba(0,0,0,0.15);
  transition: transform 0.2s;
  z-index: 10;
}
.btn-yes:active { transform: scale(0.95); }

/* Bouton NO : Transparent avec bordure blanche */
.btn-no {
  background: rgba(255,255,255,0.3);
  color: white;
  padding: 15px 30px;
  font-size: 1.2rem;
  border: 2px solid white;
  border-radius: 50px;
  font-family: 'Montserrat', sans-serif;
  font-weight: 600;
  cursor: pointer;
  position: relative; 
  transition: 0.1s;
  z-index: 10;
}
      /* ------------------------------------------ */

      #heart-canvas {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
      }

      .glass-card {
        background: var(--glass);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border-radius: 20px;
        box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
        padding: 20px;
        margin: 20px auto;
        max-width: 90%;
        width: 600px;
      }

      header {
        height: 90vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
      }
      h1 {
        font-family: "Dancing Script", cursive;
        font-size: 4rem;
        color: var(--primary);
        text-shadow: 2px 2px 0px white;
        margin: 0;
        animation: bounceInDown 1.5s;
      }

  .timeline-item {
  border-left: 4px solid #ff9a9e; /* Ligne plus jolie */
  padding-left: 20px;
  margin: 30px 0;
  position: relative;
}

/* Titre de la date (ex: Mars 2025) */
.timeline-item strong {
    font-size: 1.3rem;
    color: #d6336c; /* Rose fonc√© */
    font-weight: 800;
    display: block;
    margin-bottom: 8px;
}

/* Le texte de description (ex: The beginning of our history...) */
.timeline-item span {
    font-size: 1.05rem; /* Un peu plus grand */
    line-height: 1.6;   /* Plus d'espace entre les lignes */
    color: #000000;     /* NOIR ABSOLU */
    font-weight: 600;   /* Demi-gras pour que ce soit bien lisible */
    display: block;
    margin-bottom: 15px;
    font-family: "Montserrat", sans-serif;
}
      .timeline-item::before {
        content: "‚ù§Ô∏è";
        position: absolute;
        left: -14px;
        top: 0;
        background: transparent;
      }

      .photo-grid {
        display: flex;
        flex-direction: column;
        gap: 15px;
        margin-top: 15px;
      }
      .photo-grid img,
      .timeline-img {
        width: 100%;
        height: auto;
        object-fit: contain;
        border-radius: 12px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
        background: #fff;
        cursor: zoom-in;
        transition: transform 0.3s ease;
      }
      .photo-grid img:hover {
        transform: scale(1.02);
      }
      @media (min-width: 768px) {
        .photo-grid {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
        }
      }

      #lightbox {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        z-index: 9999;
        justify-content: center;
        align-items: center;
        cursor: zoom-out;
      }
      #lightbox img {
        max-width: 95%;
        max-height: 95%;
        border: 3px solid white;
        border-radius: 5px;
        animation: zoomIn 0.3s;
      }
      @keyframes zoomIn {
        from {
          transform: scale(0.8);
          opacity: 0;
        }
        to {
          transform: scale(1);
          opacity: 1;
        }
      }

      #map {
        height: 300px;
        width: 100%;
        border-radius: 15px;
        margin-top: 20px;
        border: 4px solid white;
      }
      .emoji-icon {
  background: transparent !important;
  border: none !important;
  text-align: center;
  font-size: 35px; /* Taille de l'emoji */
  line-height: 35px;
  filter: drop-shadow(0 3px 3px rgba(0,0,0,0.3)); /* Petite ombre pour le relief */
}
/* --- STYLE DES MARQUEURS --- */
.custom-marker {
  font-size: 35px; /* Taille de l'emoji */
  text-align: center;
  filter: drop-shadow(0 5px 5px rgba(0,0,0,0.3)); /* Ombre pour le relief */
  animation: float 2s ease-in-out infinite; /* Animation de flottement */
}

@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); } /* √áa monte et descend */
}
      #vault-section {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 20px 0;
      }
      .keypad {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 10px;
        margin-top: 20px;
      }
      .key {
        width: 60px;
        height: 60px;
        background: white;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 1.2rem;
        font-weight: bold;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        cursor: pointer;
        transition: 0.1s;
      }
      .key:active {
        background: var(--primary);
        color: white;
        transform: scale(0.9);
      }
      #pin-display {
        background: white;
        width: 180px;
        height: 50px;
        border-radius: 10px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 1.5rem;
        letter-spacing: 5px;
        border: 2px solid var(--primary);
      }

      #locked-content {
        display: none;
        opacity: 0;
        transition: opacity 1s;
      }
      #locked-content.visible {
        display: block;
        opacity: 1;
      }

      .scanner-circle {
        width: 100px;
        height: 100px;
        border: 4px solid var(--primary);
        border-radius: 50%;
        margin: 20px auto;
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        box-shadow: 0 0 15px var(--primary);
      }
      .scanner-line {
        width: 100%;
        height: 2px;
        background: var(--primary);
        position: absolute;
        animation: scan 1.5s infinite ease-in-out;
        box-shadow: 0 0 10px var(--primary);
      }
      @keyframes scan {
        0% {
          top: 0;
        }
        100% {
          top: 100%;
        }
      }

      .gallery {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 15px;
        padding: 20px;
      }
      .polaroid {
        background: white;
        padding: 10px 10px 45px 10px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        transform: rotate(-1deg);
        transition: 0.3s;
        width: 250px;
        max-width: 90%;
        cursor: pointer;
      }
      .polaroid img {
        width: 100%;
        height: auto;
        object-fit: contain;
        background: #f9f9f9;
      }
      .polaroid:nth-child(even) {
        transform: rotate(3deg);
        margin-top: 10px;
      }
      .polaroid:hover {
        transform: scale(1.05) rotate(0deg) !important;
        z-index: 10;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
      }

      .letter-section {
        font-family: "Courier Prime", monospace;
        background: #fff;
        padding: 20px;
        border-radius: 5px;
        transform: rotate(-1deg);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        position: relative;
        margin: 30px auto;
      }
      .letter-section::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 10px;
        background: repeating-linear-gradient(
          45deg,
          #e84393,
          #e84393 10px,
          #fff 10px,
          #fff 20px
        );
      }
      .cursor {
        display: inline-block;
        width: 2px;
        height: 1.2em;
        background-color: black;
        animation: blink 1s infinite;
      }
      @keyframes blink {
        50% {
          opacity: 0;
        }
      }

      .chat-container {
        background: #fff;
        border-radius: 20px;
        padding: 15px;
        height: 250px;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        gap: 10px;
        border: 1px solid #eee;
      }
      .msg {
        padding: 8px 12px;
        border-radius: 15px;
        max-width: 80%;
        font-size: 0.9rem;
        animation: fadeIn 0.5s forwards;
      }
      .msg-him {
        background: #dcf8c6;
        align-self: flex-end;
      }
      .msg-her {
        background: #f1f0f0;
        align-self: flex-start;
      }
      .typing {
        font-size: 0.8rem;
        color: #888;
        font-style: italic;
        display: none;
        text-align: right;
      }

      .game-trigger {
        background: var(--primary);
        color: white;
        border: none;
        padding: 15px 30px;
        border-radius: 50px;
        font-weight: bold;
        font-size: 1.2rem;
        cursor: pointer;
        display: block;
        margin: 30px auto;
        animation: pulse 2s infinite;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      }
      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
        100% {
          transform: scale(1);
        }
      }

      .game-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.95);
        z-index: 2000;
        justify-content: center;
        align-items: center;
        flex-direction: column;
      }
      .game-content {
        background: white;
        padding: 30px;
        border-radius: 20px;
        width: 90%;
        max-width: 400px;
        text-align: center;
        position: relative;
      }
      .btn-answer {
        width: 100%;
        padding: 15px;
        margin: 8px 0;
        background: #f1f2f6;
        border: 2px solid var(--primary);
        border-radius: 10px;
        font-weight: 600;
        cursor: pointer;
      }
      .close-game {
        position: absolute;
        top: 10px;
        right: 15px;
        font-size: 24px;
        cursor: pointer;
      }

      #scratch-container {
        position: relative;
        width: 320px;
        min-height: 250px;
        margin: 20px auto;
        user-select: none;
        display: none;
      }
      #scratch-canvas {
        position: absolute;
        top: 0;
        left: 0;
        border-radius: 10px;
        cursor: crosshair;
        z-index: 2;
      }
      #secret-prize {
        width: 100%;
        height: 100%;
        min-height: 250px;
        background: linear-gradient(45deg, #81ecec, #74b9ff);
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
        font-family: "Montserrat", sans-serif;
        font-size: 1rem;
        font-weight: 600;
        color: white;
        border-radius: 10px;
        text-align: center;
        line-height: 1.4;
        box-sizing: border-box;
      }

      .music-btn {
        position: fixed;
        top: 20px;
        right: 20px;
        background: white;
        width: 45px;
        height: 45px;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        z-index: 1000;
        cursor: pointer;
        border: 2px solid var(--primary);
      }
      .music-anim {
        animation: spin 4s linear infinite;
      }
      @keyframes spin {
        100% {
          transform: rotate(360deg);
        }
      }
    </style>
  </head>
  <body>
    <div id="intro-screen">
      <h1 class="intro-title">Will you be my Valentine?</h1>
      <img
        src="https://media.giphy.com/media/26BRv0ThflsHCqDrG/giphy.gif"
        alt="Cute"
        class="intro-gif"
      />

      <div class="btn-group">
        <button class="btn-yes" onclick="acceptValentine()">YES ‚ù§Ô∏è</button>
        <button
          class="btn-no"
          id="noBtn"
          onmouseover="moveNoBtn()"
          onclick="moveNoBtn()"
          ontouchstart="moveNoBtn()"
        >
          NO üíî
        </button>
      </div>
    </div>

    <canvas id="heart-canvas"></canvas>

    <div id="lightbox" onclick="this.style.display = 'none'">
      <img id="lightbox-img" src="" alt="Zoom" />
    </div>

    <div class="music-btn" onclick="toggleMusic()" id="music-icon">üéµ</div>
    <audio id="bg-music" loop>
      <source src="images/music.mp3" type="audio/mpeg" />
    </audio>

    <header>
      <div class="glass-card">
        <p style="letter-spacing: 2px; font-size: 0.8rem">HAPPY VALENTINE</p>
        <h1>You & Me</h1>
        <p
          id="counter"
          style="font-weight: bold; color: var(--primary); margin-top: 15px"
        >
          Chargement...
        </p>
      </div>
      <div
        class="animate__animated animate__bounce animate__infinite"
        style="margin-top: 20px"
      >
        ‚¨áÔ∏è
      </div>
    </header>

    <div class="glass-card">
      <h2 style="color: var(--primary); text-align: center">Our Story</h2>
<div class="timeline-item">
        <strong>Mars 2025</strong><br /><span
          >The beginning of our history, of our beautiful times, i'm so lucky and happy that i could meet you and be with you and to call you mine, thank u so much for choosing me, i loveee you my baby ‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</span
        >
        <div class="photo-grid">
          <img src="images/IMG_20250317_170907_466.jpg" onclick="zoomImage(this)" />
          <img src="images/IMG_20250317_170912_614.jpg" onclick="zoomImage(this)" />
          <img src="images/IMG_20250331_174059_808.jpg" onclick="zoomImage(this)" />
        </div>
      </div>

      <div class="timeline-item">
        <strong>09 Avril 2025</strong><br /><span
          >Our first Date (so gorgeous)üí•</span
        >
        <div class="photo-grid">
          <img src="images/1er date.jpg" onclick="zoomImage(this)" />
          <img src="images/1er date 13 .jpg" onclick="zoomImage(this)" />
          <img src="images/1er date 13 2.jpg" onclick="zoomImage(this)" />
          <img src="images/1st date 13.jpg" onclick="zoomImage(this)" />
        </div>
      </div>

      <div class="timeline-item">
        <strong>16 Avril 2025</strong><br /><span>2nd date ‚ù§Ô∏è</span>
        <div class="photo-grid">
          <img src="images/2nd date.jpg" onclick="zoomImage(this)" />
          <img
            src="images/16 avril second date.jpg"
            onclick="zoomImage(this)"
          />
        </div>
      </div>

      <div class="timeline-item">
        <strong>7 Mai 2025</strong><br /><span
          >Our first time to the beach (we looked so happy, it was such a
          perfect day)‚ù§Ô∏è</span
        >
        <div class="photo-grid">
          <img src="images/Beach.jpg" onclick="zoomImage(this)" />
          <img
            src="images/7 Mai 2025 1 beach first time.jpg"
            onclick="zoomImage(this)"
          />
          <img src="images/beach (2).jpg" onclick="zoomImage(this)" />
          <img src="images/Beach (3).jpg" onclick="zoomImage(this)" />
        </div>
      </div>
      <div class="timeline-item">
        <strong>18 Mai 2025</strong><br /><span
          >My cutie (they are my collection, i will allow u to see 3 of them, be
          happy hhh i loveee youuu‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è) ‚ù§Ô∏è</span
        >
        <div class="photo-grid">
          <img src="images/18 Mai.jpg" onclick="zoomImage(this)" />
          <img src="images/18 mai cute.jpg" onclick="zoomImage(this)" />
          <img src="images/18 Mai 1.jpg" onclick="zoomImage(this)" />
        </div>
      </div>
      <div class="timeline-item">
        <strong>23 Juin 2025</strong><br /><span
          >Finally your anniversary (ps: it's the best day of my life baby, i
          will always remember it as the best day ever‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è) ‚ù§Ô∏è</span
        >
        <div class="photo-grid">
          <img src="images/Anniversary.jpg" onclick="zoomImage(this)" />
          <img src="images/23 Juin.jpg" onclick="zoomImage(this)" />
          <img src="images/23 juin (2).jpg" onclick="zoomImage(this)" />
          <img src="images/birthday 13.jpg" onclick="zoomImage(this)" />
        </div>
      </div>
      <div class="timeline-item">
        <strong>Juillet, Aout, Septembre</strong><br /><span
          >A lotttt of beach Days, a lot, my favorite summer of all my life (yes you made me love the summer and the beach that i hated baby thanks to u love)</span
        >
        <div class="photo-grid">
          <img src="images/d beach.jpg" onclick="zoomImage(this)" />
          <img src="images/b.jpg" onclick="zoomImage(this)" />
          <img src="images/b1.jpg" onclick="zoomImage(this)" />
          <img src="images/b3.jpg" onclick="zoomImage(this)" />
        </div>
      </div>
      <div class="timeline-item">
        <strong>08 Octobre 2025</strong><br /><span
          >Cinema Day loveeee, remember baby how peaceful it was i almost
          slept‚ù§Ô∏è(you looked so cuteeeeeeee)</span
        >
        <div class="photo-grid">
          <img src="images/Cinema.jpg" onclick="zoomImage(this)" />
          <img src="images/Cinema 8 Octobre.jpg" onclick="zoomImage(this)" />
        </div>
      </div>
      <div class="timeline-item">
        <strong>12 Octobre 2025</strong><br /><span
          >Dispacitooooo baby (admit it : It was my idea to go there)</span
        >
        <div class="photo-grid">
          <img
            src="images/Dispacito 12 octobre.jpg"
            onclick="zoomImage(this)"
          />
          <img src="images/Dispacito.jpg" onclick="zoomImage(this)" />
        </div>
      </div>
      <div class="timeline-item">
        <strong>27 Octobre 2025</strong><br /><span
          >Remember when i told u i will make the last months the best end of
          year of our life, well i think we did it baby, this is when we did go
          back to le Voile Bleu as more mature (Ps : you looked as gorgeous as
          our first time)</span
        >
        <div class="photo-grid">
          <img src="images/Le voile 27 octobre.jpg" onclick="zoomImage(this)" />
          <img
            src="images/Le voile bleu second time.jpg"
            onclick="zoomImage(this)"
          />
        </div>
      </div>
      <div class="timeline-item">
        <strong>10 Novembre 2025</strong><br /><span
          >Mosta Dayyyyy, remember UNO (the deserted UNO hh) and ofc the best
          seller which is "Calypso"</span
        >
        <div class="photo-grid">
          <img src="images/Mosta .jpg" onclick="zoomImage(this)" />
          <img src="images/Mosta.jpg" onclick="zoomImage(this)" />
          <img src="images/mosta 13 (2).jpg" onclick="zoomImage(this)" />
          <img src="images/Mosta 13.jpg" onclick="zoomImage(this)" />
        </div>
      </div>
    <div class="timeline-item">
      <strong>31 D√©cembre 2025</strong><br /><span
        >Sushi day baby, it was so worth it love, i wanna go again babyyy</span
      >
      <div class="photo-grid">
        <img
          src="images/Screenshot_20260213_111549_Gallery.jpg"
          onclick="zoomImage(this)"
        />
        <img
          src="images/Screenshot_20260213_111555_Gallery.jpg"
          onclick="zoomImage(this)"
        />
      </div>
    </div>
    <div class="timeline-item">
      <strong>17 Janvier 2026</strong><br /><span
        >Le coq, well i admit it was your choice and the best choice (You won for once hhhh)/span
      >
      <div class="photo-grid">
        <img src="images/le coq.jpg" onclick="zoomImage(this)" />
        <img src="images/le coqq.jpg" onclick="zoomImage(this)" />
      </div>
    </div>
    <div class="timeline-item">
      <strong>19 Janvier 2026 </strong><br /><span
        >Seven burgers, the best burgers and pizza and ofc what made it more perfect was ur presence and ur smile and happiness</span
      >
      <div class="photo-grid">
        <img src="images/7 brgs.jpg" onclick="zoomImage(this)" />
        <img src="images/7brgrs.jpg" onclick="zoomImage(this)" />
      </div>
    </div>
      <div id="map"></div>
    </div>

    <div id="vault-section" class="glass-card">
      <h2>üîí Protected Zone</h2>
      <p>
        Enter the date of the best day of my life (Ps: There is a hint in the
        story)
      </p>
      <div id="pin-display">****</div>
      <div class="keypad">
        <div class="key" onclick="enterPin(1)">1</div>
        <div class="key" onclick="enterPin(2)">2</div>
        <div class="key" onclick="enterPin(3)">3</div>
        <div class="key" onclick="enterPin(4)">4</div>
        <div class="key" onclick="enterPin(5)">5</div>
        <div class="key" onclick="enterPin(6)">6</div>
        <div class="key" onclick="enterPin(7)">7</div>
        <div class="key" onclick="enterPin(8)">8</div>
        <div class="key" onclick="enterPin(9)">9</div>
        <div class="key" onclick="clearPin()">C</div>
        <div class="key" onclick="enterPin(0)">0</div>
        <div
          class="key"
          style="background: var(--primary); color: white"
          onclick="checkPin()"
        >
          OK
        </div>
      </div>
      <p id="error-msg" style="color: red; display: none; margin-top: 10px">
        Access Denied (You got it baby, i trust you )
      </p>
    </div>

    <div id="locked-content">
      <div class="glass-card">
        <h3 style="text-align: center; color: var(--primary)">
          Our stolen Moments (My choices hhh) and baby we have a lot of memories, this was just some of them, i'm so happy that i share all this with you and i will always do my loveee i loveeee  youuu so much   üì∏
        </h3>
        <div class="gallery">
          <div class="polaroid" onclick="zoomImage(this.querySelector('img'))">
            <img src="images/Beach My choice.jpg" />
          </div>
          <div class="polaroid" onclick="zoomImage(this.querySelector('img'))">
            <img src="images/Beach pics.jpg" />
          </div>
          <div class="polaroid" onclick="zoomImage(this.querySelector('img'))">
            <img
              src="images/d cute (2).jpg"
            />
          </div>
          <div class="polaroid" onclick="zoomImage(this.querySelector('img'))">
            <img
              src="images/d cute.jpg"
            />
          </div>
          <div class="polaroid" onclick="zoomImage(this.querySelector('img'))">
            <img
              src="images/d cutie.jpg"
            />
          </div>
          <div class="polaroid" onclick="zoomImage(this.querySelector('img'))">
            <img
              src="images/divers cute.jpg"
            />
          </div>
        </div>
      </div>

      <div class="glass-card" style="text-align: center">
        <div class="scanner-circle">
          <div style="font-size: 2rem">‚ù§Ô∏è</div>
          <div class="scanner-line"></div>
        </div>
        <p
          id="ai-status"
          style="font-family: Orbitron; color: var(--primary); margin-top: 10px"
        >
          Analyse...
        </p>
      </div>

      <div class="glass-card letter-section">
        <div id="typewriter"></div>
        <span class="cursor"></span>
      </div>

      <div class="glass-card">
        <h3 style="text-align: center; margin-top: 0">
          üí¨ Nos conversations...
        </h3>
        <div class="chat-container" id="chat-box"></div>
        <div class="typing" id="typing-indicator">Zoheir √©crit...</div>
      </div>

      <button class="game-trigger" onclick="openGame()">
        üéÅ Launch the final mission
      </button>
    </div>

    <div id="gameModal" class="game-modal">
      <div class="game-content">
        <span class="close-game" onclick="closeGame()">&times;</span>
        <div id="quiz-section">
          <h2 id="question-text" style="color: var(--primary)">Pr√™te ?</h2>
          <div id="answers-area"></div>
          <p
            id="feedback"
            style="font-weight: bold; margin-top: 15px; height: 20px"
          ></p>
        </div>
        <div id="scratch-section" style="display: none">
          <h2
            style="
              color: var(--primary);
              font-family: &quot;Dancing Script&quot;;
            "
          >
            You won (as expected from my baby, my pride, my gorgeous, my
            adorable and my wife) ! üéâ
          </h2>
          <p>Scratch to find ur gift :</p>
          <div id="scratch-container">
            <div id="secret-prize">
              It's a ticket for one use, You can ask anything from me and i have
              the obligation to exauce your wish so tell me my angel (Screenshot
              for later use) ‚ù§Ô∏è
            </div>
            <canvas id="scratch-canvas" width="320" height="250"></canvas>
          </div>
        </div>
      </div>
    </div>

    <script>
      /* --- FONCTION INTRO --- */
      function moveNoBtn() {
        const btn = document.getElementById("noBtn");
        // On passe en position fixed pour qu'il puisse aller partout
        btn.style.position = "fixed";
        const x = Math.random() * (window.innerWidth - btn.offsetWidth);
        const y = Math.random() * (window.innerHeight - btn.offsetHeight);
        btn.style.left = `${x}px`;
        btn.style.top = `${y}px`;
      }

      function acceptValentine() {
  const overlay = document.getElementById('intro-screen');
  const music = document.getElementById("bg-music"); // On cible la musique

  overlay.style.transition = "opacity 1s";
  overlay.style.opacity = "0";

  // Lancement de la musique
  music.volume = 0.5; // (Optionnel) Met le volume √† 50% pour ne pas l'assourdir
  music.play().then(() => {
      // La musique s'est lanc√©e avec succ√®s !
      console.log("Musique lanc√©e !");
  }).catch(error => {
      // Si jamais √ßa bloque (rare avec un clic), on affiche l'erreur
      console.log("Erreur lecture audio : ", error);
  });

  // Animation des confettis et disparition de l'√©cran
  setTimeout(() => {
      overlay.style.display = 'none';
      confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
  }, 1000);
}
      /* --- FONCTION ZOOM --- */
      function zoomImage(img) {
        const lb = document.getElementById("lightbox");
        const lbImg = document.getElementById("lightbox-img");
        lbImg.src = img.src;
        lb.style.display = "flex";
      }

      /* --- CONFIG --- */
      const START_DATE = new Date("2025-03-01");
      const SECRET_CODE = "2306";
      const LETTER_TEXT =
        "My love,\n\nCongratulations, you just cracked the code (well ofc i'm obssessed by you, so it had to be your birthday)\nI just wanted to tell u how much u mean to me.\nEvery moment with you have been a treasure, i'm so happy to have you, i pray god every day for you to protect you from everything and protect your good heart and your sweet soul, i'm so much grateful and don't forget us it's ALWAYS AND FOREVER.\n\n Are you ready for the last challenge?\n\n- Your baby";
      const CHAT_MSGS = [
        { s: "him", t: "I love you baby ‚ù§Ô∏è", d: 500 },
        { s: "her", t: "I love you more", d: 2000 },
        {
          s: "him",
          t: "No, i loveeee you more babyyyy so much ‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è",
          d: 3500,
        },
        { s: "her", t: "Okay, i admit you love me more", d: 5000 },
        { s: "him", t: "You admit it? pinky promise to me that it's true(your baby)", d: 8000 },
        { s: "her", t: "I pinky promise", d: 10000 },
        { s: "him", t: "Finally baby, finally, i'm so happy (your baby)", d: 12000 },
      ];
      
      const QUIZ = [
        {
          t: "Our first Date ?",
          a: [
            { t: "Le mexicain", c: false },
            { t: "Le voile bleu", c: false },
            { t: "Le petit chalet", c: true },
          ],
          w: "Tu as oubli√© ?! üò±",
        },
        {
          t: "Where did we meet ?",
          a: [
            { t: "UNO", c: true },
            { t: "University", c: false },
            { t: "I was your kidnapper", c: true },
          ],
          w: "Well there is 2 right answers and u did a mistake (you don't love meüò±) ?! ",
        },
        {
          t: "Who loves the other person more ?",
          a: [
            { t: "Equally", c: false },
            { t: "Me (your baby)", c: true },
            { t: "you", c: false },
          ],
          w: "Baby hh stop lying, you know the right answer ?! ",
        },
        {
          t: "Qui a toujours raison ?",
          troll: true,
          a: [
            { t: "Me (your baby)", c: true },
            { t: "You", c: false },
          ],
        },
      ];

/* --- 1. COUNTER & MAP --- */
document.getElementById("counter").innerText = Math.floor((new Date() - START_DATE) / (1000 * 60 * 60 * 24)) + " Days";

/* Zoom √† 11 pour tout voir */
var map = L.map("map").setView([35.72, -0.63], 11);
L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(map);

/* Fonction pour l'emoji centr√© */
function createIcon(emoji) {
  return L.divIcon({
    className: 'emoji-icon',
    html: `<div>${emoji}</div>`,
    iconSize: [40, 40],
    iconAnchor: [20, 20], // Centrage parfait
    popupAnchor: [0, -20]
  });
}

/* --- VOS LIEUX AVEC VOS TEXTES EXACTS --- */
L.marker([35.781167, -0.510062], { icon: createIcon('üíë') })
  .addTo(map).bindPopup("<b>Le petit Chalet</b><br>Our first date ‚ù§Ô∏è");

L.marker([35.747230, -0.571695], { icon: createIcon('‚ù§Ô∏è') })
  .addTo(map).bindPopup("<b>Le Voile Bleu</b><br>Our Second date ‚ù§Ô∏è");

L.marker([35.761438, -0.791905], { icon: createIcon('üèñÔ∏è') })
  .addTo(map).bindPopup("<b>Les dunes</b><br>Our favorite beach ");

L.marker([35.638114, -0.590318], { icon: createIcon('üè¨') })
  .addTo(map).bindPopup("<b>Centre Commercial</b><br>Well it's where we met, fell in love, worked in, there was cinema, food, and a lot of memories ");

L.marker([35.719657, -0.599789], { icon: createIcon('üéÇ') })
  .addTo(map).bindPopup("<b>Steak House</b><br>The place where we did your anniversary(ofc i had to include it), it was so perfect, everything about that day was so damn perfect love ");

L.marker([35.709746, -0.622051], { icon: createIcon('üç£') })
  .addTo(map).bindPopup("<b>SAKURA SUSHI</b><br>The best sushiiiii ");

L.marker([35.698185, -0.570431], { icon: createIcon('ü•ò') })
  .addTo(map).bindPopup("<b>LE COQ</b><br>Your inspiration hhh ");

L.marker([35.726311, -0.589767], { icon: createIcon('üçî') })
  .addTo(map).bindPopup("<b>SEVEN BURGERS</b><br>The best burger babyyy ");
      /* --- 2. VAULT --- */
      let pin = "";
      const disp = document.getElementById("pin-display");
      function enterPin(n) {
        if (pin.length < 4) {
          pin += n;
          disp.innerText = pin.padEnd(4, "*");
        }
      }
      function clearPin() {
        pin = "";
        disp.innerText = "****";
      }
      function checkPin() {
        if (pin === SECRET_CODE) {
          // document.getElementById("bg-music").play(); // Musique d√©j√† lanc√©e
          confetti();
          document.getElementById("vault-section").style.display = "none";
          const locked = document.getElementById("locked-content");
          locked.classList.add("visible");
          runUnlockSequence();
        } else {
          document.getElementById("error-msg").style.display = "block";
          setTimeout(
            () => (document.getElementById("error-msg").style.display = "none"),
            2000,
          );
          clearPin();
        }
      }

      /* --- 3. UNLOCK SEQUENCE --- */
      function runUnlockSequence() {
        const st = document.getElementById("ai-status");
        setTimeout(() => (st.innerText = "Scan R√©tinien..."), 3000);
        setTimeout(() => (st.innerText = "Acc√®s Autoris√© ‚úÖ"), 4500);
        setTimeout(typeWriter, 5000);
        setTimeout(startChat, 6000);
      }

      /* --- TYPEWRITER --- */
      let ti = 0;
      const tw = document.getElementById("typewriter");
      function typeWriter() {
        if (ti < LETTER_TEXT.length) {
          tw.innerHTML +=
            LETTER_TEXT.charAt(ti) === "\n" ? "<br>" : LETTER_TEXT.charAt(ti);
          ti++;
          setTimeout(typeWriter, 40);
        }
      }

      /* --- CHAT --- */
      function startChat() {
        const box = document.getElementById("chat-box");
        const typ = document.getElementById("typing-indicator");
        CHAT_MSGS.forEach((m) => {
          setTimeout(() => {
            if (m.s === "him") typ.style.display = "block";
            setTimeout(() => {
              typ.style.display = "none";
              const d = document.createElement("div");
              d.className = `msg msg-${m.s}`;
              d.innerText = m.t;
              box.appendChild(d);
              box.scrollTop = box.scrollHeight;
            }, 1000);
          }, m.d);
        });
      }

      /* --- 4. QUIZ GAME --- */
      let qIdx = 0;
      function openGame() {
        document.getElementById("gameModal").style.display = "flex";
        loadQ();
      }
      function closeGame() {
        document.getElementById("gameModal").style.display = "none";
      }
      function loadQ() {
        if (qIdx >= QUIZ.length) {
          showScratch();
          return;
        }
        const q = QUIZ[qIdx];
        document.getElementById("question-text").innerText = q.t;
        const area = document.getElementById("answers-area");
        area.innerHTML = "";
        document.getElementById("feedback").innerText = "";
        q.a.forEach((ans) => {
          const b = document.createElement("button");
          b.className = "btn-answer";
          b.innerText = ans.t;
          if (q.troll && !ans.c) {
            b.onmouseover = () => {
              b.style.position = "fixed";
              b.style.left = Math.random() * 80 + "%";
              b.style.top = Math.random() * 80 + "%";
            };
            b.ontouchstart = b.onmouseover;
          }
          b.onclick = () => {
            if (ans.c) {
              document.getElementById("feedback").innerText = "Bravo !";
              document.getElementById("feedback").style.color = "green";
              qIdx++;
              setTimeout(loadQ, 800);
            } else {
              document.getElementById("feedback").innerText = q.w;
              document.getElementById("feedback").style.color = "red";
            }
          };
          area.appendChild(b);
        });
      }

      function showScratch() {
        document.getElementById("quiz-section").style.display = "none";
        document.getElementById("scratch-section").style.display = "block";
        document.getElementById("scratch-container").style.display = "block";
        initScratch();
        confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });
      }

      function initScratch() {
        const c = document.getElementById("scratch-canvas");
        const ctx = c.getContext("2d");
        ctx.fillStyle = "#b2bec3";
        ctx.fillRect(0, 0, 320, 250);
        ctx.fillStyle = "#636e72";
        ctx.font = "20px Montserrat";
        ctx.fillText("Scratch the ticket ‚ú®", 65, 120);
        let draw = false;
        function getPos(e) {
          var r = c.getBoundingClientRect();
          var x =
            (e.clientX || (e.touches ? e.touches[0].clientX : 0)) - r.left;
          var y = (e.clientY || (e.touches ? e.touches[0].clientY : 0)) - r.top;
          return { x, y };
        }
        function scratch(e) {
          if (!draw) return;
          e.preventDefault();
          const p = getPos(e);
          ctx.globalCompositeOperation = "destination-out";
          ctx.beginPath();
          ctx.arc(p.x, p.y, 25, 0, Math.PI * 2);
          ctx.fill();
        }
        c.addEventListener("mousedown", () => (draw = true));
        c.addEventListener("touchstart", () => (draw = true));
        window.addEventListener("mouseup", () => (draw = false));
        window.addEventListener("touchend", () => (draw = false));
        c.addEventListener("mousemove", scratch);
        c.addEventListener("touchmove", scratch);
      }

      /* --- EXTRAS --- */
      const hc = document.getElementById("heart-canvas");
      const hctx = hc.getContext("2d");
      hc.width = window.innerWidth;
      hc.height = window.innerHeight;
      let hearts = [];
      for (let i = 0; i < 30; i++)
        hearts.push({
          x: Math.random() * hc.width,
          y: Math.random() * hc.height,
          s: Math.random() * 20 + 10,
          sp: Math.random() * 2 + 1,
        });
      function drawH() {
        hctx.clearRect(0, 0, hc.width, hc.height);
        hearts.forEach((h) => {
          hctx.font = h.s + "px serif";
          hctx.fillText("‚ù§Ô∏è", h.x, h.y);
          h.y -= h.sp;
          if (h.y < -50) h.y = hc.height;
        });
        requestAnimationFrame(drawH);
      }
      drawH();

      function toggleMusic() {
        const a = document.getElementById("bg-music");
        const b = document.getElementById("music-icon");
        a.paused
          ? (a.play(), b.classList.add("music-anim"))
          : (a.pause(), b.classList.remove("music-anim"));
      }
    </script>
  </body>
</html>
